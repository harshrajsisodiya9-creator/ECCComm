In auth service we could have just used lookup from databse using User user = userRepo.getByUsername(username)

but instead we first we authenticate it using authenticationManager(fill it with the provided username and password)
then loads the user from the database(via UserDetailsService(custom made ny me also provided by the spring security module))
then hashes the provided password compares it with the stored hash in password database
verifies the account state(locked,enabled,expired)
applies the respective security policies
throws an exception if anything is wrong

Note: Authentication Is a Policy Engine, Not a Lookup

if all checks are passed we get authentication.authenticated() == true



HTTP request arrives
   ↓  (alt + 25)
Spring Security Filter Chain starts
   ↓
SecurityContextHolderFilter
   ↓
SecurityContext is CREATED (empty)
   ↓
Your JWT filter runs
   ↓
You call setAuthentication(...)
   ↓
Controller executes
   ↓
Response sent
   ↓
SecurityContext is CLEARED

SecurityContextHolder does not need manual initialization because:
Spring Security initializes it automatically at the beginning of every HTTP request using a filter.
We are only modifying an already-created context.

SecurityContextHolder is static + ThreadLocal
Initialized automatically by Spring Security filters
One context per request thread
Cleared after request completion
You never create it manually
Your JWT filter runs after initialization
